@model chas_happenings.Models.CalendarMonthViewModel

@{
    ViewData["Title"] = "Home - Chas Happenings";
}

<div id="layout">
    <div id="side1">
    </div>

    <div id="middle-container">
        <section id="calendar">
            <h2>@Model.MonthTitle</h2>

            <div class="calendar-grid">
                <div class="calendar-cell header">Mon</div>
                <div class="calendar-cell header">Tue</div>
                <div class="calendar-cell header">Wed</div>
                <div class="calendar-cell header">Thu</div>
                <div class="calendar-cell header">Fri</div>
                <div class="calendar-cell header">Sat</div>
                <div class="calendar-cell header">Sun</div>

                @{
                    var firstDay = new DateTime(Model.Year, Model.Month, 1);
                    int offset = ((int)firstDay.DayOfWeek + 6) % 7;
                }

                @for (int i = 0; i < offset; i++)
                {
                    <div class="calendar-cell empty"></div>
                }

                @foreach (var day in Model.Days)
                {
                    <div class="calendar-cell day-cell">
                        <div class="day-number">@day.Date.Day</div>

                        <div class="day-events">
                            @foreach (var ev in day.Events)
                            {
                                var typeClass = ev.TypeName switch
                                {
                                    "School" => "school",
                                    "StudentBody" => "studentbody",
                                    "StudentBodey" => "studentbody",
                                    "Leasson" => "leasson",
                                    "StudentEvent" => "studentevent",
                                    _ => ""
                                };

                                <div class="event-pill @typeClass"
                                     onclick="onCalendarEventClick(@ev.EventId)">
                                    <div>@ev.TimeRange</div>
                                    <div>@ev.Title</div>
                                    <div>@ev.TypeName</div>
                                </div>
                            }
                        </div>
                    </div>
                }
            </div>
        </section>

        <section id="event-filters">
            <div class="filter-box filter-school" onclick="onFilterBoxClick(this)"></div>
            <div class="filter-box filter-studentbody" onclick="onFilterBoxClick(this)"></div>
            <div class="filter-box filter-leasson" onclick="onFilterBoxClick(this)"></div>
            <div class="filter-box filter-studentevent" onclick="onFilterBoxClick(this)"></div>
        </section>

        <section id="dynamic-info">
        </section>

        <section id="article">
            <h2>Article</h2>
            <p>
                This is placeholder article content. Add more text here and this
                section will keep expanding downward. The user scrolls to see more.
            </p>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer
                volutpat, lorem at tincidunt lacinia, justo arcu porta lorem,
                hendrerit semper dui felis sed velit.
            </p>
        </section>
    </div>

    <div id="side2">
    </div>
</div>

@section Scripts {
    <script src="~/js/calendar.js"></script>
}
